<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,user-scalable=no"/>
	<title>Document</title>
	<style>
	*{
		margin: 0;
		padding: 0;
	}
	body{
		overflow: hidden;
	}
		#box{
			width: 200px;
			height: 200px;
			background: red;
		}


	</style>
</head>
<body>
	<div id="box">
		
	</div>
</body>
<script src="LYween.js"></script>
<script>
document.addEventListener('touchstart', function(e) {
    e.preventDefault();
}, false);
	(function(){
		var box=document.querySelector("#box");
		css(box,"translateX",50);
		css(box,"translateY",50);
		var startEl={};
		drag({
			el:box,
			start:function(e){
				this.style.background="yellow";
				startEl={
					x:css(box,"translateX"),
					y:css(box,"translateY")
					// css(el,attr)   -->两个参数的时候 是获取attr的值
					// css(el,attr,val)   -->三个参数的时候 是设置attr的值
				}

			},
			change:function(e){
				
				this.innerHTML="x:"+e.disPoint.x+"<br/>"+"y:"+e.disPoint.y;
				css(box,"translateX",e.disPoint.x+startEl.x);
				css(box,"translateY",e.disPoint.y+startEl.y);
			},
			end:function(){
				this.style.background="red";

			}
		})
	})();
	function drag(init){
		var el=init.el;
		var isDrag=false;
		var startPoint={};
		el.addEventListener("touchstart",function(e){
			if(e.touches.length<2){
				isDrag=true;
				startPoint={
					x:e.touches[0].pageX,
					y:e.touches[0].pageY
				}
				init.start&&init.start.call(el,e);				
			}

		});
		el.addEventListener("touchmove",function(e){
			if(e.touches.length<2&&isDrag){
				var nowPoint={
					x:e.changedTouches[0].pageX,
					y:e.changedTouches[0].pageY
				};
				e.disPoint={
					x:nowPoint.x-startPoint.x,
					y:nowPoint.y-startPoint.y
				}
				init.change&&init.change.call(el,e);
			}
		});
		el.addEventListener("touchend",function(e){
			if(isDrag){
				init.end&&init.end.call(el,e);
			}
		})
	}
</script>
</html>

